<script>
const text1 = "üéâ‚ù§Ô∏èHappy Anniversary‚ù§Ô∏èüéâ";
const text2 = "October 2024 - October 2025";
const line1 = document.getElementById("line1");
const line2 = document.getElementById("line2");
const clickText = document.getElementById("clickText");

function typeText(text, el, callback){
  let i = 0;
  function typing(){
    if(i < text.length){
      el.textContent += text.charAt(i);
      i++;
      setTimeout(typing, 100);
    } else if(callback){
      callback();
    }
  }
  typing();
}

window.onload = () => {
  typeText(text1, line1, () => {
    typeText(text2, line2, () => {
      clickText.classList.add("visible");
    });
  });
};

function closeIntro() {
  const overlay = document.querySelector('.intro-overlay');
  overlay.style.transition = "opacity 1s ease";
  overlay.style.opacity = "0";
  setTimeout(() => overlay.style.display = "none", 1000);

  const music = document.getElementById('bg-music');
  music.volume = 0.7;
  music.play().catch(err => console.log("Autoplay b·ªã ch·∫∑n:", err));
}

// Scroll fade effect for sections
const sections = document.querySelectorAll("section");
window.addEventListener("scroll", () => {
  const trigger = window.innerHeight * 0.8;
  sections.forEach(sec => {
    const top = sec.getBoundingClientRect().top;
    if (top < trigger) sec.classList.add("visible");
  });
});

// Love letters
function showLetter(id) {
  document.querySelectorAll('.letter').forEach(l => l.style.display = 'none');
  document.getElementById(id).style.display = 'block';
}

// Mini game
function loveGame() {
  const res = document.getElementById('loveResult');
  const msgs = [
    "I love you more üòò",
    "Infinity and beyond ‚ù§Ô∏è",
    "You‚Äôre my world üåé",
    "Always and forever üíû"
  ];
  res.textContent = msgs[Math.floor(Math.random() * msgs.length)];
}

// Moving footsteps animation
let walked = false;
window.addEventListener("scroll", () => {
  const timeline = document.getElementById("timeline-section");
  const rect = timeline.getBoundingClientRect();
  const windowHeight = window.innerHeight;
  if (rect.top < windowHeight * 0.8 && !walked) {
    walked = true;
    walkFootsteps();
  }
});

function walkFootsteps() {
  const left = document.getElementById("leftFoot");
  const right = document.getElementById("rightFoot");
  let steps = 8;
  let pos = 0;
  function step() {
    if (pos < steps) {
      let y = pos * 70 + 20;
      if (pos % 2 === 0) {
        left.style.opacity = 1;
        left.style.top = y + "px";
        left.style.left = "47%";
      } else {
        right.style.opacity = 1;
        right.style.top = y + "px";
        right.style.left = "51%";
      }
      pos++;
      setTimeout(step, 500);
    }
  }
  step();
}

/* üåï Hi·ªáu ·ª©ng thu nh·ªè m·∫∑t trƒÉng khi cu·ªôn */
const moon = document.querySelector('.moon');
window.addEventListener('scroll', () => {
  const scrollY = window.scrollY;
  const scale = Math.max(0.5, 1 - scrollY / 1000); // nh·ªè d·∫ßn nh∆∞ng kh√¥ng bi·∫øn m·∫•t
  const opacity = Math.max(0.4, 1 - scrollY / 800);
  moon.style.transform = `scale(${scale})`;
  moon.style.opacity = opacity;
});
</script>
