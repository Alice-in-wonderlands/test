<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Birthday Gemma ‚Äî Autumn Surprise üçÇ</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Homemade+Apple&display=swap" rel="stylesheet">

  <style>
    :root{
      --orange:#d96b3b;
      --amber:#f0c27b;
      --cream:#fff8ef;
      --brown:#3b2f2f;
      --leaf:#b86b2a;
      --muted:#6b5852;
      --glass: rgba(255,255,255,0.85);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: 'Quicksand', system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      background: linear-gradient(180deg,#fff8ef,#f6e6d3);
      color:var(--brown);
      -webkit-font-smoothing:antialiased;
      overflow-x:hidden;
      scroll-behavior:smooth;
    }

    /* --- Falling leaves will be generated by JS --- */
    .leaf{ position:fixed; top:-10vh; pointer-events:none; z-index:1; opacity:0.9; }

    /* Password overlay */
    #pwOverlay{
      position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
      background: rgba(10,10,10,0.6); backdrop-filter: blur(4px); z-index:9999;
    }
    .pwCard{
      width:94%; max-width:520px; background:linear-gradient(180deg,#fffaf3,#fff2e6);
      border-radius:16px; padding:28px; text-align:center;
      box-shadow:0 14px 40px rgba(0,0,0,0.25); border:3px solid rgba(184,107,42,0.10);
    }
    .pwCard h2{margin:0 0 8px; color:var(--leaf); font-size:26px}
    .pwCard p{margin:0 0 14px; color:var(--muted)}

    .pwRow{display:flex; gap:8px; justify-content:center; align-items:center; flex-wrap:wrap}
    .pwRow input{
      padding:10px 14px; border-radius:999px; border:2px solid #f0c27b; width:62%;
      font-size:16px; outline:none; background:white;
    }
    .pwRow button{
      padding:9px 14px; border-radius:999px; border:none; cursor:pointer;
      background:var(--orange); color:#fff; font-weight:700;
      box-shadow:0 8px 20px rgba(217,107,59,0.18);
    }
    .hintBtn{background:#f7d9b0; color:var(--brown); font-weight:700; border:none; padding:9px 10px; border-radius:999px; cursor:pointer}
    .hintText{height:20px; margin-top:10px; color:var(--leaf); font-weight:700}
    .errorText{color:#d62828; margin-top:8px; display:none; font-weight:700}

    /* Main layout (stacked sections, revealed on scroll) */
    #mainContent{display:none; position:relative; z-index:2}
    header{
      min-height:60vh;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      padding:40px 20px;
      position:relative;
    }
    header .hero{
      background:var(--glass);
      padding:30px;
      border-radius:14px;
      box-shadow:0 12px 30px rgba(0,0,0,0.08);
      border:1px solid rgba(184,107,42,0.06);
      max-width:980px;
      width:100%;
      transform:translateY(0);
    }
    header h1{font-size:40px; margin:0; color:var(--leaf)}
    header p{margin:8px 0 0; color:var(--muted); font-size:16px}

    .scrollHint{
      margin-top:16px; color:var(--muted); font-weight:700; display:flex; justify-content:center; gap:8px; align-items:center;
      opacity:0.95;
    }

    .container{max-width:980px; margin:28px auto; padding:0 18px}
    section{
      margin:34px 0;
      padding:28px;
      border-radius:14px;
      background:linear-gradient(180deg,#fff,#fffaf6);
      box-shadow:0 10px 30px rgba(0,0,0,0.06);
      border-left:6px solid rgba(184,107,42,0.12);
      opacity:0; transform:translateY(18px); transition:opacity .8s ease, transform .8s ease;
    }
    section.in-view{ opacity:1; transform:translateY(0); }

    .muted{color:var(--muted); font-size:14px}
    .center{display:flex; flex-direction:column; align-items:center; justify-content:center; gap:12px}

    /* Quiz */
    .quiz-card{padding:16px; border-radius:12px; background:#fffefb; margin:12px auto; max-width:900px}
    .question{font-size:18px; font-weight:700; margin-bottom:10px}
    .answers{display:flex; gap:10px; flex-wrap:wrap}
    .opt{
      padding:10px 12px; border-radius:10px; border:2px solid #f0e4d8; cursor:pointer; min-width:160px;
      background:transparent; transition:all .18s;
    }
    .opt:hover{transform:translateY(-4px)}
    .opt.selected{border-color:var(--leaf); background:linear-gradient(180deg,#fff7f0,#fff2ea)}
    .quiz-actions{display:flex; gap:12px; margin-top:14px; align-items:center}
    .resultBox{margin-top:12px; font-weight:800; color:var(--leaf); font-size:18px; display:none}

    /* Letter (Handwritten font only inside) */
    .envelope{
      width:360px; height:220px; margin:10px auto; position:relative; perspective:900px;
      display:flex; align-items:center; justify-content:center;
    }
    .env-inner{width:100%; height:100%; transform-style:preserve-3d; transition:transform .8s cubic-bezier(.2,.9,.3,1); position:relative}
    .env-flap{position:absolute; left:0; top:-5%; width:100%; height:60%; transform-origin:center top; background:linear-gradient(180deg,#f6d8b0,#f0c27b); border-radius:10px 10px 0 0; border:1px solid rgba(0,0,0,0.06); transition:transform .6s;}
    .env-front{position:absolute; left:0; top:0; width:100%; height:100%; border-radius:10px; background:linear-gradient(180deg,#fff8f0,#fff1e3); border:1px solid rgba(0,0,0,0.04);}
    .env-open .env-flap{transform:rotateX(-180deg)}
    .letter{
      position:absolute; left:6%; top:10%; width:88%; height:80%; background:#fff; padding:18px;border-radius:8px;
      box-shadow:0 6px 18px rgba(0,0,0,0.06); transform:translateY(8px); opacity:0; transition:all .6s ease;
      font-family: 'Homemade Apple', cursive; font-size:18px; color:#5a3e36;
    }
    .env-open .letter{transform:translateY(0); opacity:1}

    /* Gift box */
    .giftWrap{width:240px; height:180px; margin:18px auto; position:relative}
    .box{
      width:100%; height:100%; background:linear-gradient(180deg,#f9e6d6,#f2d6bb);
      border-radius:12px; position:relative; box-shadow:0 14px 36px rgba(0,0,0,0.12);
      transition:transform .5s ease;
    }
    .lid{position:absolute; left:6px; right:6px; top:-28px; height:66px; background:linear-gradient(180deg,#d97b46,#c56737);
      border-radius:12px; transform-origin:center; transition:transform .6s;}
    .box.open .lid{transform:translateY(-64px) rotateX(22deg)}
    .ribbon{position:absolute; left:50%; transform:translateX(-50%); width:12px; top:0; height:100%; background:linear-gradient(180deg,#8b3a2e,#6d2418); border-radius:6px}
    .bow{position:absolute; left:50%; top:-20px; transform:translateX(-50%); width:56px; height:36px; border-radius:18px; background:linear-gradient(180deg,#e9966b,#d96b3b); display:flex; align-items:center; justify-content:center; box-shadow:0 6px 16px rgba(0,0,0,0.12)}
    .presentImg{max-width:92%; max-height:120px; display:block; margin:8px auto; border-radius:8px; box-shadow:0 8px 20px rgba(0,0,0,0.12); display:none}

    /* Small */
    footer{padding:18px; text-align:center; color:var(--muted); font-weight:700}
    @media (max-width:680px){
      header h1{font-size:30px}
      .envelope{width:300px;height:190px}
      .giftWrap{width:200px;height:140px}
    }
  </style>
</head>
<body>

  <!-- Falling leaves (added by JS) -->

  <!-- Password overlay -->
  <div id="pwOverlay" aria-hidden="false">
    <div class="pwCard" role="dialog" aria-labelledby="pwTitle">
      <h2 id="pwTitle">üçÅ Secret Autumn Door üçÅ</h2>
      <p>Enter the password to open Gemma‚Äôs cozy fall birthday surprise!</p>
      <div class="pwRow">
        <input id="pwInput" type="password" placeholder="Password..." aria-label="password">
        <button id="pwSubmit" aria-label="Open">Open</button>
        <button id="hintBtn" class="hintBtn" aria-label="Hint">Hint</button>
      </div>
      <div class="hintText" id="hintText"></div>
      <div class="errorText" id="pwError">Wrong password ‚Äî try again!</div>
    </div>
  </div>

  <!-- Main content (hidden until correct password) -->
  <main id="mainContent" aria-hidden="true">
    <header>
      <div class="hero" role="banner">
        <h1>üçÇ Happy Birthday, Gemma! üçÇ</h1>
        <p>Welcome to a cozy autumn surprise ‚Äî scroll down to discover fun bits about Gemma.</p>
        <div class="scrollHint" aria-hidden="false">Scroll down <span style="font-size:18px">‚Üì</span></div>
      </div>
    </header>

    <div class="container">

      <!-- Quiz section (all questions shown, submit at bottom) -->
      <section id="quizSection" aria-labelledby="quizTitle">
        <h2 id="quizTitle">üß† Fun Quiz about Gemma</h2>
        <p class="muted">Try these playful questions ‚Äî it‚Äôs just for fun!</p>

        <div id="quizContainer" class="quiz-card" aria-live="polite"></div>

        <div class="quiz-actions" style="margin-top:18px;">
          <button id="submitQuiz" class="pwRow" style="padding:10px 18px; border-radius:999px; background:var(--leaf); color:white; border:none; cursor:pointer;">Submit Answers</button>
          <div id="quizResult" class="resultBox" role="status" aria-live="polite"></div>
        </div>
      </section>

      <!-- Letter section -->
      <section id="letterSection" aria-labelledby="letterTitle">
        <h2 id="letterTitle">üíå A Birthday Letter</h2>
        <p class="muted">Click the envelope to open the handwritten note.</p>
        <div class="envelope" id="envelope" aria-hidden="false">
          <div class="env-inner" id="envInner">
            <div class="env-flap" aria-hidden="true"></div>
            <div class="env-front" aria-hidden="true"></div>
            <div class="letter" id="letterContent" role="document" aria-label="Birthday letter">
              Dear Gemma,<br><br>
              As the leaves turn golden and the air grows crisper, another gentle chapter begins for you.  
              You are the warm light on our coolest days ‚Äî kind, steady, and full of quiet brightness.  
              May your year ahead be filled with soft joys, bold new dreams, and peaceful moments that make your heart smile.<br><br>
              Happy Birthday, Gemma.<br>
              With love,<br>Your Team üçÅ
            </div>
          </div>
        </div>
        <div class="center">
          <button id="openLetterBtn" class="hintBtn" style="padding:10px 14px; border-radius:999px;">Open Letter</button>
          <button id="closeLetterBtn" class="hintBtn" style="display:none;padding:10px 14px;border-radius:999px;">Close Letter</button>
        </div>
      </section>

      <!-- Gift section -->
      <section id="giftSection" aria-labelledby="giftTitle">
        <h2 id="giftTitle">üéÅ The Mystery Gift</h2>
        <p class="muted">Click the gift to reveal the surprise image. Replace the placeholder image with your own later.</p>

        <div class="giftWrap" id="giftWrap" aria-hidden="false">
          <div class="box" id="giftBox" role="button" tabindex="0" aria-pressed="false" aria-label="Open gift box">
            <div class="lid"></div>
            <div class="ribbon" aria-hidden="true"></div>
            <div class="bow" aria-hidden="true">üéÄ</div>
            <img id="presentImg" class="presentImg" src="your-image.jpg" alt="Gift image placeholder (replace with your own)">
          </div>
        </div>

        <div class="center">
          <button id="openGiftBtn" class="pwRow" style="padding:10px 14px; border-radius:999px; background:var(--leaf); color:white; border:none; cursor:pointer;">Open Gift</button>
          <button id="resetGiftBtn" class="hintBtn" style="display:none;padding:10px 14px;border-radius:999px;">Close Gift</button>
        </div>
      </section>

      <footer>Made with autumn love by the team üçÅ</footer>
    </div>
  </main>

  <script>
    /*****************************
     * Falling leaves generator
     *****************************/
    (function createLeaves(){
      const icons = ['üçÅ','üçÇ','üçÉ'];
      const total = 20;
      const body = document.body;
      for(let i=0;i<total;i++){
        const el = document.createElement('div');
        el.className = 'leaf';
        el.textContent = icons[Math.floor(Math.random()*icons.length)];
        const size = 14 + Math.random()*24;
        el.style.fontSize = size + 'px';
        el.style.left = (Math.random()*100) + 'vw';
        const dur = 8 + Math.random()*12;
        el.style.animation = `fall ${dur}s linear ${Math.random()*6}s infinite`;
        el.style.opacity = 0.85 - Math.random()*0.35;
        body.appendChild(el);
      }
      // dynamic keyframes: small horizontal drift differences
      const style = document.createElement('style');
      style.innerHTML = `
        @keyframes fall {
          0% { transform: translateY(-10vh) rotate(0deg) translateX(0); opacity:0 }
          10% { opacity:1 }
          50% { transform: translateY(45vh) rotate(180deg) translateX(6vw) }
          100% { transform: translateY(110vh) rotate(360deg) translateX(-8vw); opacity:0.95 }
        }`;
      document.head.appendChild(style);
    })();

    /*****************************
     * Password overlay
     *****************************/
    const CORRECT = 'bruce';
    const overlay = document.getElementById('pwOverlay');
    const pwInput = document.getElementById('pwInput');
    const pwSubmit = document.getElementById('pwSubmit');
    const hintBtn = document.getElementById('hintBtn');
    const hintText = document.getElementById('hintText');
    const pwError = document.getElementById('pwError');
    const mainContent = document.getElementById('mainContent');

    function openMain(){
      overlay.style.opacity = 0;
      setTimeout(()=> overlay.style.display = 'none', 400);
      mainContent.style.display = 'block';
      mainContent.setAttribute('aria-hidden','false');
      // trigger observer check
      setTimeout(()=> io && io.disconnect() && setupObserver(), 80);
    }

    pwSubmit.addEventListener('click', ()=>{
      const val = pwInput.value.trim().toLowerCase();
      if(val === CORRECT) openMain();
      else {
        pwError.style.display = 'block';
        setTimeout(()=> pwError.style.display = 'none', 1900);
      }
    });
    pwInput.addEventListener('keydown', (e) => { if(e.key==='Enter') pwSubmit.click(); });
    hintBtn.addEventListener('click', ()=> {
      hintText.textContent = 'Hint: something dark... like autumn nights üçÇ';
      setTimeout(()=> hintText.textContent = '', 4500);
    });

    /*****************************
     * Scroll reveal (fade & slide up)
     *****************************/
    let io = null;
    function setupObserver(){
      const sections = document.querySelectorAll('main section, header .hero');
      const options = { root: null, rootMargin: '0px', threshold: 0.18 };
      io = new IntersectionObserver((entries)=>{
        entries.forEach(entry=>{
          if(entry.isIntersecting){
            // find nearest section ancestor
            const target = entry.target.tagName.toLowerCase() === 'section' ? entry.target : entry.target.closest('.hero') || entry.target;
            if(target) target.classList.add('in-view');
          }
        });
      }, options);
      sections.forEach(s => io.observe(s));
    }

    /*****************************
     * Quiz rendering + submit
     *****************************/
    const quizData = [
      { q: "What's Gemma's favorite morning drink?", options: ["Coffee", "Tea", "Smoothie", "Water"], a: 0 },
      { q: "If Gemma were a season, she'd be‚Ä¶", options: ["Spring", "Summer", "Autumn", "Winter"], a: 2 },
      { q: "Gemma's go-to comfort food?", options: ["Pizza", "Pho", "Sushi", "Salad"], a: 2 },
      { q: "How does Gemma relax?", options: ["Reading", "Watching movies", "Walking", "Exercising"], a: 0 }
    ];
    const quizContainer = document.getElementById('quizContainer');
    const quizResult = document.getElementById('quizResult');

    function renderQuizAll(){
      quizContainer.innerHTML = '';
      quizData.forEach((item, idx)=>{
        const wrap = document.createElement('div');
        wrap.className = 'question-block';
        wrap.innerHTML = `<div class="question">${idx+1}. ${item.q}</div><div class="answers" data-q="${idx}"></div>`;
        quizContainer.appendChild(wrap);
        const answersEl = wrap.querySelector('.answers');
        item.options.forEach((opt, oi)=>{
          const btn = document.createElement('button');
          btn.type = 'button';
          btn.className = 'opt';
          btn.textContent = opt;
          btn.dataset.q = idx;
          btn.dataset.opt = oi;
          btn.addEventListener('click', ()=>{
            // toggling selection
            const siblings = answersEl.querySelectorAll('.opt');
            siblings.forEach(s => s.classList.remove('selected'));
            btn.classList.add('selected');
          });
          answersEl.appendChild(btn);
        });
      });
    }

    document.getElementById('submitQuiz').addEventListener('click', ()=>{
      let score = 0;
      for(let i=0;i<quizData.length;i++){
        const chosen = document.querySelector(`.answers[data-q="${i}"] .opt.selected`);
        if(chosen && Number(chosen.dataset.opt) === quizData[i].a) score++;
      }
      quizResult.style.display = 'block';
      let msg = '';
      if(score === quizData.length) msg = "You know Gemma perfectly! üéâ";
      else if(score >= Math.ceil(quizData.length*0.6)) msg = "Great job ‚Äî close enough! üòä";
      else msg = "Nice try ‚Äî ask the team for fun facts about Gemma!";
      quizResult.textContent = `You scored ${score}/${quizData.length} ‚Äî ${msg}`;
      // reveal letter section by scrolling slightly after submit
      setTimeout(()=> document.getElementById('letterSection').scrollIntoView({behavior:'smooth'}), 900);
    });

    /*****************************
     * Envelope open/close
     *****************************/
    const envInner = document.getElementById('envInner');
    const openLetterBtn = document.getElementById('openLetterBtn');
    const closeLetterBtn = document.getElementById('closeLetterBtn');
    const envelope = document.getElementById('envelope');

    function openLetter(){
      envelope.classList.add('env-open');
      openLetterBtn.style.display = 'none';
      closeLetterBtn.style.display = 'inline-block';
      setTimeout(()=> document.getElementById('letterContent').scrollIntoView({behavior:'smooth'}), 300);
    }
    function closeLetter(){
      envelope.classList.remove('env-open');
      openLetterBtn.style.display = 'inline-block';
      closeLetterBtn.style.display = 'none';
    }

    openLetterBtn.addEventListener('click', openLetter);
    closeLetterBtn.addEventListener('click', closeLetter);
    envelope.addEventListener('click', ()=> {
      if(envelope.classList.contains('env-open')) closeLetter(); else openLetter();
    });

    /*****************************
     * Gift open/close
     *****************************/
    const giftBox = document.getElementById('giftBox');
    const presentImg = document.getElementById('presentImg');
    const openGiftBtn = document.getElementById('openGiftBtn');
    const resetGiftBtn = document.getElementById('resetGiftBtn');

    function openGift(){
      giftBox.classList.add('open');
      presentImg.style.display = 'block';
      presentImg.style.opacity = 0;
      setTimeout(()=> presentImg.style.opacity = 1, 60);
      openGiftBtn.style.display = 'none';
      resetGiftBtn.style.display = 'inline-block';
      setTimeout(()=> document.getElementById('giftSection').scrollIntoView({behavior:'smooth'}), 180);
      giftBox.setAttribute('aria-pressed','true');
    }
    function closeGift(){
      giftBox.classList.remove('open');
      presentImg.style.opacity = 0;
      setTimeout(()=> presentImg.style.display = 'none', 420);
      openGiftBtn.style.display = 'inline-block';
      resetGiftBtn.style.display = 'none';
      giftBox.setAttribute('aria-pressed','false');
    }

    openGiftBtn.addEventListener('click', openGift);
    resetGiftBtn.addEventListener('click', closeGift);
    giftBox.addEventListener('click', ()=> {
      if(giftBox.classList.contains('open')) closeGift(); else openGift();
    });
    giftBox.addEventListener('keydown', (e)=> { if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); giftBox.click(); }});

    /*****************************
     * Initialize page after DOM load
     *****************************/
    document.addEventListener('DOMContentLoaded', ()=>{
      renderWhenReady();
    });

    function renderWhenReady(){
      // render quiz
      renderQuizAll();

      // set up scroll observer AFTER main is shown
      setupObserver();
    }

    /*****************************
     * Accessibility / shortcuts
     *****************************/
    document.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape'){
        // close letter / close gift if open
        if(envelope.classList.contains('env-open')) closeLetter();
        if(giftBox.classList.contains('open')) closeGift();
      }
    });

    /*****************************
     * If user wants to replace placeholder image via console:
     * document.getElementById('presentImg').src = 'https://your-url';
     *****************************/
  </script>
</body>
</html>
